type: sanitizer
name: thread
description: "ThreadSanitizer - Detect data races"

requires:
  compiler: [clang, gcc]

conflicts_with:
  sanitizer: [address, memory]

flags:
  compile:
    - "-fsanitize=thread"
    - "-fno-omit-frame-pointer"
    - "-g"
  link:
    - "-fsanitize=thread"

defines:
  - "TSAN_ENABLED=1"

runtime_env:
  TSAN_OPTIONS: "halt_on_error=1"
